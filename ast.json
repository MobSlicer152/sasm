['; comment', '', '; label', 'add:', '    ; make a new stack frame', '    push ebp', '    mov ebp, esp', '', '    ; this is 32-bit, can just use cdecl', '    ; return address and arguments are above ebp', '    mov eax, DWORD PTR [ebp + 8] ; get first argument', '    add eax, DWORD PTR [ebp + 12] ; add second argument', '', '    ; clean up stack frame, eax is the return value', '    pop ebp', '    ret']
ebp
ebp
esp
eax
DWORD PTR [ebp + 8]
eax
DWORD PTR [ebp + 12]
ebp
"AstNode": { "children": ["LabelNode": { "name": "add", "children": ["InstructionNode": { "mnemonic": "push", "operands": ["RegisterNode": { "register": "Register { name: ebp, type: r32, reg: 5 }" }, "RegisterNode": { "register": "Register { name: ebp, type: r32, reg: 5 }" }, "RegisterNode": { "register": "Register { name: esp, type: r32, reg: 4 }" }, "RegisterNode": { "register": "Register { name: eax, type: r32, reg: 0 }" }, "PointerNode": { "type": "m32", "base": "", "offset": 0 }, "RegisterNode": { "register": "Register { name: eax, type: r32, reg: 0 }" }, "PointerNode": { "type": "m32", "base": "", "offset": 0 }, "RegisterNode": { "register": "Register { name: ebp, type: r32, reg: 5 }" }] }, "InstructionNode": { "mnemonic": "mov", "operands": ["RegisterNode": { "register": "Register { name: ebp, type: r32, reg: 5 }" }, "RegisterNode": { "register": "Register { name: ebp, type: r32, reg: 5 }" }, "RegisterNode": { "register": "Register { name: esp, type: r32, reg: 4 }" }, "RegisterNode": { "register": "Register { name: eax, type: r32, reg: 0 }" }, "PointerNode": { "type": "m32", "base": "", "offset": 0 }, "RegisterNode": { "register": "Register { name: eax, type: r32, reg: 0 }" }, "PointerNode": { "type": "m32", "base": "", "offset": 0 }, "RegisterNode": { "register": "Register { name: ebp, type: r32, reg: 5 }" }] }, "InstructionNode": { "mnemonic": "mov", "operands": ["RegisterNode": { "register": "Register { name: ebp, type: r32, reg: 5 }" }, "RegisterNode": { "register": "Register { name: ebp, type: r32, reg: 5 }" }, "RegisterNode": { "register": "Register { name: esp, type: r32, reg: 4 }" }, "RegisterNode": { "register": "Register { name: eax, type: r32, reg: 0 }" }, "PointerNode": { "type": "m32", "base": "", "offset": 0 }, "RegisterNode": { "register": "Register { name: eax, type: r32, reg: 0 }" }, "PointerNode": { "type": "m32", "base": "", "offset": 0 }, "RegisterNode": { "register": "Register { name: ebp, type: r32, reg: 5 }" }] }, "InstructionNode": { "mnemonic": "add", "operands": ["RegisterNode": { "register": "Register { name: ebp, type: r32, reg: 5 }" }, "RegisterNode": { "register": "Register { name: ebp, type: r32, reg: 5 }" }, "RegisterNode": { "register": "Register { name: esp, type: r32, reg: 4 }" }, "RegisterNode": { "register": "Register { name: eax, type: r32, reg: 0 }" }, "PointerNode": { "type": "m32", "base": "", "offset": 0 }, "RegisterNode": { "register": "Register { name: eax, type: r32, reg: 0 }" }, "PointerNode": { "type": "m32", "base": "", "offset": 0 }, "RegisterNode": { "register": "Register { name: ebp, type: r32, reg: 5 }" }] }, "InstructionNode": { "mnemonic": "pop", "operands": ["RegisterNode": { "register": "Register { name: ebp, type: r32, reg: 5 }" }, "RegisterNode": { "register": "Register { name: ebp, type: r32, reg: 5 }" }, "RegisterNode": { "register": "Register { name: esp, type: r32, reg: 4 }" }, "RegisterNode": { "register": "Register { name: eax, type: r32, reg: 0 }" }, "PointerNode": { "type": "m32", "base": "", "offset": 0 }, "RegisterNode": { "register": "Register { name: eax, type: r32, reg: 0 }" }, "PointerNode": { "type": "m32", "base": "", "offset": 0 }, "RegisterNode": { "register": "Register { name: ebp, type: r32, reg: 5 }" }] }, "InstructionNode": { "mnemonic": "ret", "operands": ["RegisterNode": { "register": "Register { name: ebp, type: r32, reg: 5 }" }, "RegisterNode": { "register": "Register { name: ebp, type: r32, reg: 5 }" }, "RegisterNode": { "register": "Register { name: esp, type: r32, reg: 4 }" }, "RegisterNode": { "register": "Register { name: eax, type: r32, reg: 0 }" }, "PointerNode": { "type": "m32", "base": "", "offset": 0 }, "RegisterNode": { "register": "Register { name: eax, type: r32, reg: 0 }" }, "PointerNode": { "type": "m32", "base": "", "offset": 0 }, "RegisterNode": { "register": "Register { name: ebp, type: r32, reg: 5 }" }] }] }] }
